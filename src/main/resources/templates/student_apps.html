<!DOCTYPE html>
<html lang="th" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head><meta charset="UTF-8"><title>ใบสมัครของฉัน</title></head>
<body>
  <div>
    <span sec:authorize="isAuthenticated()">
      เข้าสู่ระบบโดย: <b sec:authentication="name">user</b> |
      <form method="post" action="/logout" th:object="${_csrf}" style="display:inline">
        <input type="hidden" th:name="*{parameterName}" th:value="*{token}" />
        <button type="submit">ออกจากระบบ</button>
      </form>
    </span>
    <span sec:authorize="isAnonymous()">
      <a href="/login">เข้าสู่ระบบ</a>
    </span>
    <span sec:authorize="hasRole('TEACHER')"> | <a href="/teacher/jobs">พื้นที่อาจารย์</a></span>
    <span sec:authorize="hasRole('STUDENT')"> | <a href="/student/applications">ใบสมัครของฉัน</a></span>
    | <a href="/">หน้าแรก</a>
  </div>

  <h2>ใบสมัครของฉัน (นักศึกษา)</h2>
  <table border="1" cellpadding="6" cellspacing="0">
    <thead><tr><th>ชื่องาน</th><th>ส่งเมื่อ</th><th>สถานะ</th><th>คำตอบ</th></tr></thead>
    <tbody>
      <tr th:each="a : ${apps}">
        <td th:text="${a.job.title}">job</td>
        <td th:text="${#temporals.format(a.appliedAt, 'yyyy-MM-dd HH:mm')}">date</td>
        <td th:text="${a.status}">status</td>
        <td th:text="${a.answerText}">answer</td>
      </tr>
    </tbody>
  </table>
</body></html>
